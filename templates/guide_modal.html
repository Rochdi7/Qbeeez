<!-- Guide Button -->
<!-- Guide Button with Icon -->
{% load static %}

<!-- Guide Modal -->
<div id="guide-modal" class="guide-modal" style="display: none;">
  <div class="guide-content">
    <span class="close">&times;</span>
    <div class="guide-header">Guide</div>
    <button id="prev-btn" class="nav-btn prev" disabled>
      <i class="fa-solid fa-chevron-left"></i>
    </button>
    <div class="guide-slides">
      <!-- Your guide slides go here -->
      <div class="guide-slide">
        <div class="guide-title">Commentaire</div>
        <div class="guide-body">
          <div class="guide-image">
            <img src="{% static 'gif/Comment.gif' %}" alt="Commentaire Tutorial"> <!-- Updated image source -->
          </div>
          <div class="guide-text">
            <p><span style="color: #008080;"><strong>Pour commenter, suivez ces étapes simples :</strong></span></p>
            <ul>
              <li><span style="color: black;">- Activez ou non le "Mode Anonyme" pour partager vos opinions discrètement.</span></li>
              <li><span style="color: black;">- Entrer les propositions de QCM pertinentes A OU B OU C OU D pour filtrer les commentaires.</span></li>
              <li><span style="color: black;">- Rédigez votre commentaire dans la zone dédiée.</span></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Repeat similar structure for other slides -->
      <div class="guide-slide">
        <div class="guide-title" style="color: black;">Voir course pdf</div>
        <div class="guide-body">
          <div class="guide-image">
            <img src="{% static 'gif/Cours.gif' %}" alt="Font Size Adjustment Tutorial">
          </div>
          <div class="guide-text">
            <h3 style="color: #008080; font-weight: bold;">PDF</h3>
            <ul>
              <li><span style="color: #008080; font-weight: bold;">-</span> Tu peux voir le pdf et répondre aux questions en cliquant le bouton de voir PDF "<span style="color: #008080; font-weight: bold;">+</span>" et "<span style="color: #008080; font-weight: bold;">-</span>".</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="guide-slide">
        <div class="guide-title" style="color: black;">Mode examen et mode révision</div>
        <div class="guide-body">
          <div class="guide-image">
            <img src="{% static 'gif/ModeExRV.gif' %}" alt="Font Size Adjustment Tutorial">
          </div>
          <div class="guide-text">
            <h3 style="color: #008080; font-weight: bold;">Mode examen et mode révision</h3>
            <ul>
              <li><span style="color: #008080; font-weight: bold;">-</span> Vous pouvez entrer le mode examen ou révision en cliquant le bouton de mode examen "<span style="color: #008080; font-weight: bold;">+</span>" et "<span style="color: #008080; font-weight: bold;">-</span>".</li>
              <li><span style="color: #008080; font-weight: bold;">-</span> Si tu veux quitter, veuillez désactiver en cliquant le bouton mode examen "<span style="color: #008080; font-weight: bold;">+</span>".</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="guide-slide">
        <div class="guide-title" style="color: black;">Ajuster la taille de la police</div>
        <div class="guide-body">
          <div class="guide-image">
            <img src="{% static 'gif/FullScreenA-.gif' %}" alt="Font Size Adjustment Tutorial">
          </div>
          <div class="guide-text">
            <h3 style="color: #008080; font-weight: bold;">Full Screen + taille de police de QCM</h3>
            <ul>
              <li><span style="color: #008080; font-weight: bold;">-</span> Vous pouvez entrer le mode écran en cliquant l'icône de plein écran "<span style="color: #008080; font-weight: bold;">+</span>" et "<span style="color: #008080; font-weight: bold;">-</span>".</li>
              <li><span style="color: #008080; font-weight: bold;">-</span> Vous pouvez augmenter la taille de la police des QCM en cliquant sur le bouton "<span style="color: #008080; font-weight: bold;">+</span>".</li>
              <li><span style="color: #008080; font-weight: bold;">-</span> Vous pouvez diminuer la taille de la police des QCM en cliquant sur le bouton "<span style="color: #008080; font-weight: bold;">-</span>".</li>
              <li><span style="color: #008080; font-weight: bold;">-</span> Vous pouvez revenir à la taille par défaut en cliquant sur l'icône entre les boutons "<span style="color: #008080; font-weight: bold;">+</span>" et "<span style="color: #008080; font-weight: bold;">-</span>".</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="guide-slide">
        <div class="guide-title" style="color: #008080;">Notes</div>
        <div class="guide-body">
          <div class="guide-image">
            <img src="{% static 'gif/Notes.gif' %}" alt="Dark Mode Tutorial">
          </div>
          <div class="guide-text">
            <h3 style="color: #008080; font-weight: bold;">Prendre des notes en quiz</h3>
            <p style="color: black;"><span>-</span>Entrer votre note dépend de la question</p>
            <p style="color: black;"><span>-</span>Toute votre note, vous pouvez l'obtenir dans la barre de navigation des notes afin de pouvoir supprimer et modifier vos notes.</p>
          </div>
        </div>
      </div>
    </div>
    <button id="next-btn" class="nav-btn next">
      <i class="fa-solid fa-chevron-right"></i>
    </button>
  </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const guideBtn = document.getElementById('guide-btn');
        const guideModal = document.getElementById('guide-modal');
        const closeBtn = document.querySelector('.guide-modal .close');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const guideSlides = document.querySelectorAll('.guide-slide');
        let currentSlide = 0;

        function showSlide(index) {
            guideSlides.forEach((slide, i) => {
                slide.style.display = i === index ? 'flex' : 'none';
            });
            prevBtn.disabled = index === 0;
            nextBtn.disabled = index === guideSlides.length - 1;
        }

        guideBtn.addEventListener('click', () => {
            guideModal.style.display = 'flex';
            showSlide(currentSlide);
        });

        closeBtn.addEventListener('click', () => {
            guideModal.style.display = 'none';
            currentSlide = 0; // Reset to first slide when closing
            showSlide(currentSlide);
        });

        prevBtn.addEventListener('click', () => {
            if (currentSlide > 0) {
                currentSlide--;
                showSlide(currentSlide);
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentSlide < guideSlides.length - 1) {
                currentSlide++;
                showSlide(currentSlide);
            }
        });

        // Fullscreen functionality for guide images
        const fullscreenImg = document.createElement('img');
        fullscreenImg.classList.add('fullscreen');
        document.body.appendChild(fullscreenImg);

        guideSlides.forEach(slide => {
            const img = slide.querySelector('.guide-image img');
            if (img) {
                img.addEventListener('click', () => {
                    fullscreenImg.src = img.src;
                    fullscreenImg.style.display = 'block';
                });
            }
        });

        fullscreenImg.addEventListener('click', () => {
            fullscreenImg.style.display = 'none';
        });
    });
</script>

<style>
    .guide-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }
    .guide-content {
        background: white;
        padding: 20px;
        border-radius: 8px;
        max-width: 600px;
        width: 90%;
        display: flex;
        flex-direction: column;
        position: relative;
    }
    .guide-header {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 20px;
        color: #008080;
    }
    .guide-slide {
        display: none;
        flex-direction: column;
    }
    .guide-title {
        font-size: 20px;
        margin-bottom: 10px;
        color: #008080;
    }
    .guide-body {
        display: flex;
        flex-direction: column;
    }
    .guide-image {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 10px;
    }
    .guide-image img {
        max-width: 100%;
        height: auto;
        cursor: pointer; /* Pointer cursor for clickable images */
    }
    .guide-text {
        flex: 1;
    }
    .nav-btn {
        border: none;
        background: #008080;
        color: white;
        padding: 10px;
        cursor: pointer;
        margin: 10px;
        border-radius: 5px;
    }
    .nav-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
    }
    /* Fullscreen style for clicked images */
    .fullscreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: contain;
        z-index: 1001; /* Higher z-index to overlay on modal */
        display: none; /* Hidden by default */
    }
    /* Responsive styles */
    @media (max-width: 768px) {
        .guide-content {
            padding: 10px;
        }
        .guide-header {
            font-size: 20px;
        }
        .guide-title {
            font-size: 18px;
        }
        .nav-btn {
            padding: 5px;
        }
    }
</style>
